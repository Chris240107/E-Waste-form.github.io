<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Awesome Form - Level 4</title>
    <!--for the color of the page and font style---->
    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            display: grid;
            place-items: center;
        }

        .form-container {
            border: 5px solid #000000;
            padding: 40px;
            background-color: #e7e0e0;
            /* Added max-width for better responsiveness on larger screens */
            max-width: 600px;
            width: 90%; /* Make it take up 90% width on smaller screens, but not more than max-width */
            box-sizing: border-box; /* Include padding/border in element's total width/height */
        }
        .question-container {
            padding: 40px;
            border: 2px solid #000000;
            background-color: #b8b5a0;
            /* Added margin-top for spacing between h1 and form */
            margin-top: 20px;
        }
        h1{
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            text-align: center; /* Center the main heading */
        }
        h2{
            font-family: 'Courier New', Courier, monospace;
            margin-top: 20px; /* Add some space above Heading2s */
            margin-bottom: 10px; /* Add some space below Heading2s */
        }
        /* Basic styling for form elements for better readability */
        label {
            display: block; /* Makes labels appear on their own line */
            margin-bottom: 5px; /* Adds space below labels */
            font-weight: bold; /* Makes labels bold */
        }
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select {
            width: 100%; /* Make inputs take full width of their container */
            padding: 8px; /* Add internal spacing */
            margin-bottom: 15px; /* Add space below inputs */
            border: 1px solid #ccc; /* Light grey border */
            border-radius: 4px; /* Slightly rounded corners */
            box-sizing: border-box; /* Ensures padding doesn't increase total width */
        }
        button[type="submit"] {
            padding: 10px 20px; /* Padding for the button */
            background-color: #4CAF50; /* Green background */
            color: white; /* White text */
            border: none; /* No border */
            border-radius: 5px; /* Rounded corners */
            cursor: pointer; /* Changes cursor to a pointer on hover */
            font-size: 16px; /* Larger font size */
            margin-top: 20px; /* Space above the button */
            width: 100%; /* Make button full width */
        }
        button[type="submit"]:hover {
            background-color: #45a049; /* Darker green on hover */
        }

        /* Styles for the custom message box */
        .message-box-overlay {
            position: fixed; /* Fixed position relative to the viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            display: flex; /* Use flexbox to center content */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Ensure it's on top of other content */
            visibility: hidden; /* Initially hidden */
            opacity: 0; /* Initially transparent */
            transition: visibility 0s, opacity 0.3s ease; /* Smooth transition for appearance */
        }
        .message-box-overlay.visible {
            visibility: visible;
            opacity: 1;
        }
        .message-box-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        .message-box-content p {
            margin-bottom: 20px;
            font-size: 1.1em;
            color: #333;
        }
        .message-box-content button {
            background-color: #007bff; /* Blue button for OK */
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .message-box-content button:hover {
            background-color: #0056b3;
        }

        /* NEW: Style for the points display within the message box */
        #earnedPointsDisplay {
            color: #4CAF50; /* Green color for points, matching your button */
            font-size: 1.5em; /* Make it a bit bigger */
            font-weight: bold;
            display: block; /* Make it take its own line */
            margin-top: 10px; /* Add some space above it */
        }
    </style>
</head>
<body class="form-container">
    <h1>Super Awesome E-waste form</h1> <!-- heading of the page-->

    <!-- Added an ID to the form for JavaScript to easily select it -->
    <form id="ewasteForm" class="question-container">
        <h2>Your details</h2> <!-- Corrected closing tag for h2 -->
        <div>
            <label for="username">Full name</label>
            <input type="text" id="username" name="username" required> <!-- Added 'required' -->
        </div>
        <div>
            <label for="email">Email</label>
            <input type="email" id="email" name="email" required> <!-- Added 'required' -->
        </div>

        <h2>E-Waste Details</h2>
        <div>
            <!-- Corrected 'for' attribute for label -->
            <label for="wastetype">Type of Ewaste</label>
            <select id="wastetype" name="wastetype" required> <!-- Added 'required' -->
                <option value="">-- Select a type --</option> <!-- New: Placeholder option -->
                <option value="phones">Mobile Phones/Tablets - 2500 points</option>
                <option value="Laptop">Laptops - 7500 points</option>
                <option value="Monitor">Monitors/TVs - 9000 points</option>
                <option value="CPUs">CPUs/Printers - 12000 points</option>
                <option value="Others">Others - 1000 points</option>
            </select>
        </div>
        <div>
            <label for="wastequantity">Quantity of Ewaste</label>
            <input type="number" id="wastequantity" name="wastequantity" min="1" value="1" required> <!-- Added 'min' and 'required' -->
        </div>
        <div>
            <button type="submit">Submit form and E- waste</button>
        </div>
    </form>

    <!-- Custom Message Box HTML -->
    <div id="messageBox" class="message-box-overlay">
        <div class="message-box-content">
            <p id="messageText"></p>
            <!-- NEW: Span to display earned points -->
            <span id="earnedPointsDisplay"></span>
            <button id="messageBoxClose">OK</button>
        </div>
    </div>

    <script> // Javacript begins from here
        // NEW: Define point values for each e-waste type
        const EWASTE_POINTS = {
            "phones": 2500,
            "Laptop": 7500,
            "Monitor": 9000,
            "CPUs": 12000,
            "Others": 1000 // Default points for "Others"
        };

        // 1. Get references to the HTML elements we need to interact with
        const ewasteForm = document.getElementById('ewasteForm'); // The whole form
        const usernameInput = document.getElementById('username'); // The username input field
        const emailInput = document.getElementById('email');       // The email input field
        const wastetypeSelect = document.getElementById('wastetype'); // The e-waste type dropdown
        const wastequantityInput = document.getElementById('wastequantity'); // The quantity input field

        const messageBox = document.getElementById('messageBox'); // The message box overlay
        const messageText = document.getElementById('messageText'); // The text inside the message box
        const messageBoxClose = document.getElementById('messageBoxClose'); // The OK button in the message box

        // NEW: Get reference to the element that will display earned points
        const earnedPointsDisplay = document.getElementById('earnedPointsDisplay');

        // 2. Function to show the custom message box
        function showMessageBox(message) {
            messageText.textContent = message; // Set the message text
            messageBox.classList.add('visible'); // Add 'visible' class to show the box with transition
        }

        // 3. Event listener for the message box's OK button
        messageBoxClose.addEventListener('click', () => {
            messageBox.classList.remove('visible'); // Remove 'visible' class to hide the box
            ewasteForm.reset(); // Reset the form when the message box is closed
            // NEW: Clear the earned points display when closing the message box
            earnedPointsDisplay.textContent = '';
        });

        // 4. Add an event listener to the form for when it's submitted
        ewasteForm.addEventListener('submit', (event) => {
            // This is the most important line for client-side forms!
            // It stops the browser from its default behavior of reloading the page
            // or trying to navigate to the 'action' URL specified in the <form> tag.
            event.preventDefault();

            // 5. Get the values from the input fields
            const username = usernameInput.value.trim(); // .trim() removes leading/trailing whitespace
            const email = emailInput.value.trim();
            const wastetype = wastetypeSelect.value;
            const wastequantity = parseInt(wastequantityInput.value); // Convert to a number!

            // NEW: Basic Validation
            if (!username || !email || !wastetype || wastetype === "" || isNaN(wastequantity) || wastequantity <= 0) {
                // Clear previous points display in case of error
                earnedPointsDisplay.textContent = '';
                showMessageBox("Please fill in all required fields and ensure quantity is a positive number.");
                return; // Stop the function here if validation fails
            }

            // NEW: Calculate points
            let pointsEarned = 0;
            if (EWASTE_POINTS[wastetype]) {
                // If the selected wastetype exists in our EWASTE_POINTS object
                pointsEarned = EWASTE_POINTS[wastetype] * wastequantity;
            } else {
                // Fallback for "Others" or if somehow an invalid type is selected
                pointsEarned = EWASTE_POINTS["Others"] * wastequantity;
            }

            // 6. Display a confirmation message using our custom message box
            // The main message will be simple, and points will be in their dedicated span
            let confirmationMessage = `Thank you, ${username}! Your submission for ${wastequantity} of ${wastetype} has been recorded.`;

            showMessageBox(confirmationMessage);
            // NEW: Update the earned points display
            earnedPointsDisplay.textContent = `You earned ${pointsEarned} points!`;

            // Form reset is handled when the message box is closed.
        });
    </script>
</body>
</html>
